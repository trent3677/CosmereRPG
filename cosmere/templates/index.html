<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmere RPG Digital Companion</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div id="app">
        <h1>Cosmere RPG Digital Companion</h1>
        <p>Welcome to your journey through the Cosmere!</p>
        
        <div id="session-section">
            <h2>Session</h2>
            <div class="grid-2">
                <div>
                    <label>
                        Username
                        <input id="username" type="text" placeholder="Worldhopper">
                    </label>
                    <button onclick="login()">Login</button>
                    <button onclick="logout()">Logout</button>
                    <div id="session-status" class="status"></div>
                </div>
                <div>
                    <h3>Character Saves</h3>
                    <label>
                        Select Character
                        <select id="save-char-select"></select>
                    </label>
                    <button onclick="exportCharacter()">Export</button>
                    <button onclick="deleteCharacter()">Delete</button>
                    <div style="margin-top:8px;">
                        <textarea id="import-json" rows="4" style="width:100%;" placeholder='Paste character JSON here to import'></textarea>
                        <button onclick="importCharacter()">Import</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="character-section">
            <h2>Characters</h2>
            <div class="grid-2">
                <div>
                    <h3>Create New</h3>
                    <label>
                        Name
                        <input id="new-char-name" type="text" placeholder="Kaladin">
                    </label>
                    <label>
                        Heritage
                        <input id="new-char-heritage" type="text" placeholder="Alethi">
                    </label>
                    <label>
                        Path
                        <input id="new-char-path" type="text" placeholder="Windrunner">
                    </label>
                    <label>
                        Origin
                        <input id="new-char-origin" type="text" placeholder="Roshar">
                    </label>
                    <div class="grid-2">
                        <label>Strength<input id="stat-strength" type="number" value="0" min="-5" max="5"></label>
                        <label>Speed<input id="stat-speed" type="number" value="0" min="-5" max="5"></label>
                        <label>Intellect<input id="stat-intellect" type="number" value="0" min="-5" max="5"></label>
                        <label>Willpower<input id="stat-willpower" type="number" value="0" min="-5" max="5"></label>
                        <label>Awareness<input id="stat-awareness" type="number" value="0" min="-5" max="5"></label>
                        <label>Persuasion<input id="stat-persuasion" type="number" value="0" min="-5" max="5"></label>
                    </div>
                    <button onclick="createNewCharacter()">Create Character</button>
                </div>
                <div>
                    <h3>Saved</h3>
                    <div id="character-list"></div>
                </div>
            </div>
        </div>
        
        <div id="dice-section">
            <h2>Dice Roller</h2>
            <button onclick="rollSkillCheck()">Roll Skill Check</button>
            <button onclick="rollDamage()">Roll Damage</button>
            <div id="dice-results"></div>
        </div>

        <div id="rules-section">
            <h2>Rules Search</h2>
            <input id="rule-query" type="text" placeholder="Search rules (e.g., Plot Die)">
            <button onclick="searchRules()">Search</button>
            <div id="rule-results"></div>
        </div>

        <div id="investiture-section">
            <h2>Investiture</h2>
            <div class="grid-2">
                <div>
                    <h3>Update Pool</h3>
                    <label>
                        Character
                        <select id="char-select"></select>
                    </label>
                    <label>
                        Type
                        <input id="inv-type" type="text" placeholder="Allomancy / Surgebinding">
                    </label>
                    <label>
                        Points
                        <input id="inv-points" type="number" min="0" value="0">
                    </label>
                    <label>
                        Max Points
                        <input id="inv-max" type="number" min="0" value="0">
                    </label>
                    <button onclick="updateInvestiture()">Save Investiture</button>
                </div>
                <div>
                    <h3>Use Power</h3>
                    <label>
                        Power
                        <select id="power-select"></select>
                    </label>
                    <button onclick="applyPower()">Apply Cost</button>
                    <div id="inv-status" class="status"></div>
                </div>
            </div>
        </div>

        <div id="talents-section">
            <h2>Talents</h2>
            <div class="grid-2">
                <div>
                    <label>
                        Path Filter
                        <input id="talent-path" type="text" placeholder="Windrunner / Coinshot">
                    </label>
                    <button onclick="loadTalents()">Load Talents</button>
                    <div id="talent-list"></div>
                </div>
                <div>
                    <label>
                        Apply to Character
                        <select id="talent-char-select"></select>
                    </label>
                    <label>
                        Talent
                        <select id="talent-select"></select>
                    </label>
                    <button onclick="applyTalent()">Apply Talent</button>
                    <div id="talent-status" class="status"></div>
                </div>
            </div>
        </div>

        <div id="combat-section">
            <h2>Combat</h2>
            <div class="grid-2">
                <div>
                    <h3>Start Combat</h3>
                    <label>
                        Participants
                        <select id="combat-participants" multiple style="height:120px;"></select>
                    </label>
                    <button onclick="startCombat()">Start</button>
                </div>
                <div>
                    <h3>Turn</h3>
                    <div id="combat-state"></div>
                    <button onclick="combatActSkill()">Skill Check</button>
                    <button onclick="combatActPower()">Use Power</button>
                    <button onclick="combatEndTurn()">End Turn</button>
                    <button onclick="finishCombat()">Finish</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/static/js/app.js"></script>
</body>
</html>

